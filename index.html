<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="dark light">
  <meta http-equiv="origin-trial"
    content="AoXwZGsUZlGEyuueX5nR6tujynrCfWhNWQnZcHTy3AZkXtCMULt/UJs6+/1Bp5jVw7Ue96Tcyf1IO8IRUMimAgcAAABeeyJvcmlnaW4iOiJodHRwczovL2Nocm9tZS5kZXY6NDQzIiwiZmVhdHVyZSI6IkFJUHJvbXB0QVBJTXVsdGltb2RhbElucHV0IiwiZXhwaXJ5IjoxNzc0MzEwNDAwfQ==">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>">
  <link rel="stylesheet" href="style.css">
  <title>OffLearn - Offline Learning Hub</title>
  <script>
    if (!isSecureContext) location.protocol = "https:";
  </script>
  <script src="script.js" type="module"></script>
</head>

<body>
  <header>
    <h1 id="back-to-home">OffLearn</h1>
    <p>Your personal AI tutor powered by Chrome's built-in Gemini Nano - works completely offline!</p>
    <div class="status-bar">
      <span id="offline-status">üü¢ Offline Ready</span>
      <span id="session-info">Session: Ready</span>
    </div>
  </header>
  <div id="error-message"></div>

  <!-- Main Screen with Three Options -->
  <div id="main-screen">
    <div class="main-options">
      <h2>Choose Your AI Assistant</h2>
      <div class="option-cards">
        <div class="option-card" id="tutor-card">
          <div class="card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" viewBox="0 0 640 512"><path fill="#FFFFFF" d="M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91c-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62C.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38c.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96s-96 42.98-96 96s42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"/></svg></div>
          <h3>Ask Tutor</h3>
          <p>Interactive learning with personalized explanations, quizzes, and practice problems</p>
          <button class="option-btn" id="open-tutor">Start Learning</button>
        </div>

        <div class="option-card" id="summarizer-card">
          <div class="card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" viewBox="0 0 17 16" fill="#FFFFFF"><g fill="#FFFFFF" fill-rule="evenodd"><path d="M2 0v16h13V4.024L9 4V.062L2 0zm11 13H4v-1h9v1zm0-2H4v-1h9v1zm0-4v1H4V7h9z"/><path d="M10 0v2.844h4.752L10 0z"/></g></svg></div>
          <h3>Summarizer</h3>
          <p>Quickly summarize long texts, articles, or documents into key points or short paragraphs.</p>
          <button class="option-btn" id="open-summarizer">Summarize Text</button>
        </div>

        <div class="option-card" id="writer-card">
          <div class="card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" viewBox="0 0 700 820"><path fill="#FFFFFF" d="M626 70q25 25 41 52t23 52t4 46t-17 36L389 544L288 646L0 696l51-287l101-102L440 19q14-14 36-17t47 4t52 23t51 41zM259 602q-12-20-30-44t-43-48t-48-43t-44-30L76 542q21 15 42.5 36.5T154 621z"/></svg></div>
          <h3>Writing Helper</h3>
          <p>Improve your writing with grammar checks, style suggestions, and content ideas</p>
          <button class="option-btn" id="open-writer">Get Writing Help</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Tutor Panel -->
  <div id="tutor-panel" class="app-panel" style="display: none;">
    <div class="panel-header">
      <button class="back-btn" id="back-from-tutor">‚Üê Back to Main</button>
      <h2><svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" viewBox="0 0 640 512"><path fill="#FFFFFF" d="M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91c-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62C.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38c.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96s-96 42.98-96 96s42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"/></svg> AI Tutor</h2>
      <div class="header-buttons">
        <details class="advanced-options">
          <summary><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 416 432"><path fill="#FFFFFF" d="m366 237l45 35q7 6 3 14l-43 74q-4 8-13 4l-53-21q-18 13-36 21l-8 56q-1 9-11 9h-85q-9 0-11-9l-8-56q-19-8-36-21l-53 21q-9 3-13-4L1 286q-4-8 3-14l45-35q-1-12-1-21t1-21L4 160q-7-6-3-14l43-74q5-8 13-4l53 21q18-13 36-21l8-56q2-9 11-9h85q10 0 11 9l8 56q19 8 36 21l53-21q9-3 13 4l43 74q4 8-3 14l-45 35q2 12 2 21t-2 21zm-158.5 54q30.5 0 52.5-22t22-53t-22-53t-52.5-22t-52.5 22t-22 53t22 53t52.5 22z"/></svg> Advanced Options</summary>
          <div class="settings">
            <label for="session-temperature">AI Creativity</label>
            <input id="session-temperature" type="range" min="0" max="2" step="0.1" value="0.7">
            <label for="response-length">Response Length</label>
            <select id="response-length">
              <option value="concise" selected>Concise</option>
              <option value="detailed">Detailed</option>
              <option value="comprehensive">Comprehensive</option>
            </select>
          </div>
        </details>
        <button class="help-btn" id="tutor-help"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="#FFFFFF" d="M11.95 18q.525 0 .888-.363t.362-.887q0-.525-.362-.888t-.888-.362q-.525 0-.887.363t-.363.887q0 .525.363.888t.887.362Zm-.9-3.85h1.85q0-.825.188-1.3t1.062-1.3q.65-.65 1.025-1.238T15.55 8.9q0-1.4-1.025-2.15T12.1 6q-1.425 0-2.313.75T8.55 8.55l1.65.65q.125-.45.563-.975T12.1 7.7q.8 0 1.2.438t.4.962q0 .5-.3.938t-.75.812q-1.1.975-1.35 1.475t-.25 1.825ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg> Help</button>
      </div>
    </div>

    <div id="learning-setup">
      <div class="learning-controls">
        <div class="control-group">
          <label for="subject-select">Subject</label>
          <select id="subject-select">
            <option value="general">General Learning</option>
            <option value="math">Mathematics</option>
            <option value="science">Science</option>
            <option value="language">Language Arts</option>
            <option value="history">History</option>
            <option value="programming">Programming</option>
            <option value="physics">Physics</option>
            <option value="chemistry">Chemistry</option>
            <option value="biology">Biology</option>
          </select>
        </div>

        <div class="control-group">
          <label for="level-select">Level</label>
          <select id="level-select">
            <option value="beginner">Beginner</option>
            <option value="intermediate">Intermediate</option>
            <option value="advanced">Advanced</option>
          </select>
        </div>

        <div class="control-group">
          <label for="focus-area">Focus Area (Optional)</label>
          <input type="text" id="focus-area" placeholder="e.g., algebra, grammar, photosynthesis">
        </div>
      </div>
    </div>

     <div id="conversation-section">
      <div id="response-area"></div>

      <!-- <div class="learning-tools">
            <button id="new-lesson-button">üÜï New Lesson</button>
            <button id="copy-notes-button">üìã Copy Notes</button>
          </div> -->
    
      <div id="problematic-area">
        <h3>Issue Report:</h3>
        <pre id="problem"></pre>
      </div>
    </div>

    <div id="main-interaction-area">
      <div id="prompt-area">
        <form id="tutor-form">
          <label>
            <span class="form-heading">Ask your question or describe what you'd like to learn</span>
          
            <textarea id="prompt-input"
              placeholder="e.g., 'Explain photosynthesis' or 'Give me algebra practice problems'"></textarea>
          </label>
          <div class="button-group">
            <button type="submit" id="submit-button">Ask Tutor</button>
          </div>
          <span id="cost" style="display: none;"></span>
        </form>

        <div class="learning-tools">
          <button id="new-lesson-button">Start New Lesson</button>
        </div>
         
      </div>
    </div>

   

  </div>

  <!-- Summarizer Panel -->
  <div id="summarizer-panel" class="app-panel" style="display: none;">
    <div class="panel-header">
      <button class="back-btn" id="back-from-summarizer">‚Üê Back to Main</button>
      <h2><svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" viewBox="0 0 17 16" fill="#FFFFFF"><g fill="#FFFFFF" fill-rule="evenodd"><path d="M2 0v16h13V4.024L9 4V.062L2 0zm11 13H4v-1h9v1zm0-2H4v-1h9v1zm0-4v1H4V7h9z"/><path d="M10 0v2.844h4.752L10 0z"/></g></svg>Text Summarizer</h2>
      <button class="help-btn" id="summarizer-help"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="#FFFFFF" d="M11.95 18q.525 0 .888-.363t.362-.887q0-.525-.362-.888t-.888-.362q-.525 0-.887.363t-.363.887q0 .525.363.888t.887.362Zm-.9-3.85h1.85q0-.825.188-1.3t1.062-1.3q.65-.65 1.025-1.238T15.55 8.9q0-1.4-1.025-2.15T12.1 6q-1.425 0-2.313.75T8.55 8.55l1.65.65q.125-.45.563-.975T12.1 7.7q.8 0 1.2.438t.4.962q0 .5-.3.938t-.75.812q-1.1.975-1.35 1.475t-.25 1.825ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg> Help</button>
    </div>

    <div class="summarizer-controls">
      <div class="control-group">
        <label for="summary-length">Summary Length</label>
        <select id="summary-length">
          <option value="brief">Brief (2-3 sentences)</option>
          <option value="medium" selected>Medium (1 paragraph)</option>
          <option value="detailed">Detailed (Multiple paragraphs)</option>
        </select>
      </div>

      <div class="control-group">
        <label for="summary-style">Summary Style</label>
        <select id="summary-style">
          <option value="bullet">Bullet Points</option>
          <option value="paragraph" selected>Paragraph</option>
          <option value="outline">Outline Format</option>
        </select>
      </div>
    </div>

    <div class="summarizer-input">
      <form id="summarizer-form">
        <label>
          <span class="form-heading">Paste your text to summarize</span>
          <textarea id="text-input" placeholder="Paste your article, document, or long text here..."></textarea>
        </label>
        <div class="button-group">
          <button type="submit" id="summarize-button">üìÑ Summarize Text</button>
        </div>
      </form>
    </div>

    <div id="summary-section" style="display: none;">
      <h2>Summary</h2>
      <div id="summary-area"></div>
      <div class="summary-tools">
        <button id="copy-summary-button">üìã Copy Summary</button>
        <button id="new-summary-button">üÜï New Summary</button>
      </div>
    </div>
  </div>

  <!-- Writing Helper Panel -->
  <div id="writer-panel" class="app-panel" style="display: none;">
    <div class="panel-header">
      <button class="back-btn" id="back-from-writer">‚Üê Back to Main</button>
      <h2><svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" viewBox="0 0 700 820"><path fill="#FFFFFF" d="M626 70q25 25 41 52t23 52t4 46t-17 36L389 544L288 646L0 696l51-287l101-102L440 19q14-14 36-17t47 4t52 23t51 41zM259 602q-12-20-30-44t-43-48t-48-43t-44-30L76 542q21 15 42.5 36.5T154 621z"/></svg> Writing Helper</h2>
      <button class="help-btn" id="writer-help"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="#FFFFFF" d="M11.95 18q.525 0 .888-.363t.362-.887q0-.525-.362-.888t-.888-.362q-.525 0-.887.363t-.363.887q0 .525.363.888t.887.362Zm-.9-3.85h1.85q0-.825.188-1.3t1.062-1.3q.65-.65 1.025-1.238T15.55 8.9q0-1.4-1.025-2.15T12.1 6q-1.425 0-2.313.75T8.55 8.55l1.65.65q.125-.45.563-.975T12.1 7.7q.8 0 1.2.438t.4.962q0 .5-.3.938t-.75.812q-1.1.975-1.35 1.475t-.25 1.825ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg> Help</button>
    </div>

    <div class="writer-controls">
      <div class="control-group">
        <label for="writing-task">Writing Task</label>
        <select id="writing-task">
          <option value="improve">Improve Existing Text</option>
          <option value="grammar">Grammar Check</option>
          <option value="style">Style Enhancement</option>
          <option value="ideas">Generate Ideas</option>
          <option value="structure">Structure Help</option>
        </select>
      </div>

      <div class="control-group">
        <label for="writing-type">Text Type</label>
        <select id="writing-type">
          <option value="general">General Writing</option>
          <option value="academic">Academic Paper</option>
          <option value="business">Business Email</option>
          <option value="creative">Creative Writing</option>
          <option value="technical">Technical Documentation</option>
        </select>
      </div>
    </div>

    <div class="writer-input">
      <form id="writer-form">
        <label>
          <span class="form-heading">Enter your text or writing prompt</span>
          <textarea id="writing-input"
            placeholder="Paste your text for improvement, or describe what you want to write..."></textarea>
        </label>
        <div class="button-group">
          <button type="submit" id="writing-button">Get Writing Help</button>
        </div>
      </form>
    </div>

    <div id="writing-section" style="display: none;">
      <h2>Writing Assistance</h2>
      <div id="writing-area"></div>
      <div class="writing-tools">
        <button id="copy-writing-button">üìã Copy Result</button>
        <button id="new-writing-button">üÜï New Request</button>
      </div>
    </div>
  </div>

  <!-- Tutor Welcome Modal -->
  <div id="tutor-welcome-modal" class="modal welcome-modal">
    <div class="modal-content welcome-content">
      <span class="close" id="tutor-welcome-close">&times;</span>
      <div class="welcome-header">
        <h2>Welcome to AI Tutor</h2>
      </div>
      <div class="welcome-body">
        <h3>Ready to learn? Here's how to get started:</h3>
        <ul>
          <li>üéØ <strong>Choose your subject and level</strong> to customize your experience</li>
          <li>‚ùì <strong>Ask any question</strong> - I'll adapt to your learning style</li>
          <li>üìö <strong>Get explanations, practice problems, and quizzes</strong></li>
        </ul>
        <p><em>Interactive learning powered by AI - works completely offline! üåç</em></p>
        <div class="welcome-actions">
          <button id="tutor-welcome-start" class="welcome-btn">Let's Start Learning!</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Summarizer Welcome Modal -->
  <div id="summarizer-welcome-modal" class="modal welcome-modal">
    <div class="modal-content welcome-content">
      <span class="close" id="summarizer-welcome-close">&times;</span>
      <div class="welcome-header">
        <h2>Welcome to Text Summarizer</h2>
      </div>
      <div class="welcome-body">
        <h3>Ready to summarize? Here's how it works:</h3>
        <ul>
          <li>üìù <strong>Paste any long text</strong> - articles, documents, research papers</li>
          <li>‚öôÔ∏è <strong>Choose summary length</strong> - brief, medium, or detailed</li>
          <li>üé® <strong>Select format</strong> - bullet points, paragraphs, or outline</li>
          <li>‚ö° <strong>Get instant summaries</strong> with key points highlighted</li>
          <li>üìã <strong>Copy and use</strong> your summaries anywhere</li>
        </ul>
        <p><em>Turn lengthy content into digestible insights - powered by AI! üöÄ</em></p>
        <div class="welcome-actions">
          <button id="summarizer-welcome-start" class="welcome-btn">Start Summarizing!</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Writing Helper Welcome Modal -->
  <div id="writer-welcome-modal" class="modal welcome-modal">
    <div class="modal-content welcome-content">
      <span class="close" id="writer-welcome-close">&times;</span>
      <div class="welcome-header">
        <h2>Welcome to Writing Helper</h2>
      </div>
      <div class="welcome-body">
        <h3>Ready to improve your writing? Here's what I can do:</h3>
        <ul>
          <li>‚úèÔ∏è <strong>Grammar and spell check</strong> - fix errors instantly</li>
          <li>üé® <strong>Style enhancement</strong> - make your writing more engaging</li>
          <li>üí° <strong>Generate ideas</strong> - overcome writer's block</li>
          <li>üìã <strong>Structure help</strong> - organize your thoughts better</li>
          <li>üéØ <strong>Adapt to any format</strong> - emails, essays, creative writing</li>
        </ul>
        <p><em>Your personal writing assistant - always ready to help! ‚ú®</em></p>
        <div class="welcome-actions">
          <button id="writer-welcome-start" class="welcome-btn">Start Writing!</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div id="confirm-modal" class="modal confirm-modal">
    <div class="modal-content confirm-content">
      <div class="confirm-header">
        <h3 id="confirm-title">Confirm Action</h3>
      </div>
      <div class="confirm-body">
        <p id="confirm-message">Are you sure you want to proceed?</p>
      </div>
      <div class="confirm-actions">
        <button id="confirm-cancel" class="confirm-btn cancel-btn">Cancel</button>
        <button id="confirm-ok" class="confirm-btn ok-btn">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Alert Modal -->
  <div id="alert-modal" class="modal alert-modal">
    <div class="modal-content alert-content">
      <div class="alert-header">
        <h3 id="alert-title">Notice</h3>
      </div>
      <div class="alert-body">
        <p id="alert-message">This is an alert message.</p>
      </div>
      <div class="alert-actions">
        <button id="alert-ok" class="alert-btn ok-btn">OK</button>
      </div>
    </div>
  </div>



  <footer><p>Made with passion by <a href="https://www.linkedin.com/in/abdulwajid786/" target="_blank">AW</a> and <a href="https://www.linkedin.com/in/lettyraby/" target="_blank">LR</a> from <a href="https://codersbeyondborders.co.in/">Coders-Beyond-Borders</a> for the <a href="https://googlechromeai2025.devpost.com/" target="_blank">Google Chrome Built-in AI Challenge 2025</a> and humanity.</footer>

</body>

</html>